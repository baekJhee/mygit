<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리스트 +- 룰렛</title>
    <link rel="stylesheet" href="./css/test.css">
</head>

<body>
    <div id="wrap">
        <h1>
            랜덤 뽑기 룰렛
        </h1>
        <section>
            <div class="roulette">
                <div class="circle">
                    <ul>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                        <li><input type="text" maxlength="6"></li>
                    </ul>
                </div>
                <div class="stopzone on">
                    <div class="arrow_stop"></div>
                    <div class="arrow"></div>
                    <div class="center"></div>
                </div>
            </div>
            <div class="btns">
                <div class="start">돌리기</div>
                <div class="stop">멈추기</div>
                <div class="plus">추가</div>
                <div class="minus">빼기</div>
                <div class="reset">R<span>모두 지우기</span></div>
            </div>
        </section>
    </div>
    <script src="./js/test.js"></script>

    <script>
        const list_ul = document.querySelector(".circle ul");
        const plus = document.querySelector(".plus");
        const minus = document.querySelector(".minus");


        minus.addEventListener("click", () => {
            const list_li = list_ul.querySelectorAll("li");
            const total = list_li.length;

            if (total <= 2) return
            list_ul.removeChild(list_li[total - 1]);


            const newLiList = list_ul.querySelectorAll('li');
            const newTotal = newLiList.length;
            // 반지름 계산
            const radius = 225; // li의 중심점 기준 반지름
            newLiList.forEach((li, index) => {
                const angle = (360 / newTotal) * index;

                li.style.rotate = `${angle}deg`;

                //두 번째 li 45도 배수 일 경우 화살표 각도 조절
                function arrowDeg() {
                    const angleOfSecondLi = (360 / newTotal) * 1;
                    const arrow = document.querySelector(".arrow");

                    if (angleOfSecondLi % 45 === 0) {
                        console.log("화살표 각도 변경");
                        arrow.style.rotate = ("-45deg");
                    } else {
                        arrow.style.rotate - ("-20deg");
                    }
                }
                arrowDeg()
            });
        });

        plus.addEventListener("click", () => {
            const list_li = list_ul.querySelectorAll("li");
            const total = list_li.length;

            if (total >= 10) return
            const newLi = document.createElement("li");
            list_ul.appendChild(newLi);

            // input 요소 생성 및 추가
            const input = document.createElement("input");
            input.type = "text";
            input.maxlength = "6";
            // input.placeholder = `Item ${list_ul.children.length + 1}`;

            newLi.appendChild(input);
            list_ul.appendChild(newLi);


            const newLiList = list_ul.querySelectorAll('li');
            const newTotal = newLiList.length;
            // 반지름 계산
            const radius = 225; // li의 중심점 기준 반지름
            newLiList.forEach((li, index) => {
                const angle = (360 / newTotal) * index;

                li.style.rotate = `${angle}deg`;

                //두 번째 li 45도 배수 일 경우 화살표 각도 조절
                const angleOfSecondLi = (360 / newTotal) * 1;
                const arrow = document.querySelector(".arrow");

            });
            arrowDeg()
        });
    </script>

</body>


</html>